experiment_group: "chunking_grid_core"

docs:
  - id: "3M_OEM_SOP"
    path: "../datasets/archive/test_data/text/3m_marine_oem_sop.txt"
    gold_tier_a: "../datasets/archive/gold_human/3M_OEM_SOP.json"
    gold_tier_b: "../datasets/archive/gold_human_tierb/3M_OEM_SOP.json"
  - id: "DOA_Food_Proc"
    path: "../datasets/archive/test_data/text/DOA_Food_Man_Proc_Stor.txt"
    gold_tier_a: "../datasets/archive/gold_human/DOA_Food_Man_Proc_Stor.json"
    gold_tier_b: "../datasets/archive/gold_human_tierb/DOA_Food_Man_Proc_Stor.json"
  - id: "op_firesafety_guideline"
    path: "../datasets/archive/test_data/text/op_firesafety_guideline.txt"
    gold_tier_a: "../datasets/archive/gold_human/op_firesafety_guideline.json"
    gold_tier_b: "../datasets/archive/gold_human_tierb/op_firesafety_guideline.json"

llm:
  backend: "llama_cpp"
  model_path: "../models/llm/mistral-7b-instruct-v0.2.Q4_K_M.gguf"
  n_ctx: 8192
  temperature: 0.1
  top_p: 0.9
  max_tokens: 1536
  repeat_penalty: 1.1
  max_chunks: 0
  num_workers: 4
  device_strategy: "multi_gpu_parallel"
  random_seed: 42

prompting:
  strategy: "P0"

evaluation:
  tier: "both"
  threshold: 0.75
  spacy_model: "en_core_web_sm"
  embedding_model: "all-mpnet-base-v2"

chunking_experiments:
  - name: "fixed_2000_no_overlap"
    method: "fixed"
    params:
      chunk_size_chars: 2000
      chunk_overlap_chars: 0

  - name: "fixed_2000_overlap200"
    # Sliding-window baseline tuned for high recall with overlap-aware deduplication.
    method: "fixed"
    params:
      chunk_size_chars: 2000
      chunk_overlap_chars: 200
      chunk_overlap_dedup_ratio: 0.8
      enable_chunk_dedup: true
      chunk_dedup_threshold: 0.92
      chunk_dedup_overlap_ratio: 0.75
      chunk_dedup_min_unique_chars: 320

  - name: "breakpoint_semantic_lambda015"
    # Semantic breakpoint chunker (high recall, controlled redundancy via tightening sentence windows).
    method: "breakpoint_semantic"
    params:
      chunk_max_chars: 1800
      sem_lambda: 0.12
      sem_window_w: 28
      sem_min_sentences_per_chunk: 3
      sem_max_sentences_per_chunk: 20
      sem_preferred_sentences_per_chunk: 8
      enable_chunk_dedup: true
      chunk_dedup_threshold: 0.9
      chunk_dedup_overlap_ratio: 0.72
      chunk_dedup_min_unique_chars: 280

  - name: "dual_semantic_block16"
    # Dual semantic chunker: parent sections then breakpoint refinement with redundancy filtering.
    method: "dual_semantic"
    params:
      chunk_max_chars: 1900
      dsc_parent_block_sentences: 20
      dsc_child_sem_lambda: 0.11
      dsc_child_window_w: 24
      dsc_dynamic_threshold_k: 0.75
      sem_min_sentences_per_chunk: 3
      sem_max_sentences_per_chunk: 22
      sem_preferred_sentences_per_chunk: 10
      enable_chunk_dedup: true
      chunk_dedup_threshold: 0.9
      chunk_dedup_overlap_ratio: 0.72
      chunk_dedup_min_unique_chars: 300
