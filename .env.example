# IPKE Configuration
# Copy this file to `.env` and adjust settings as needed.

# Environment
IPKE_ENV=development

# GPU Configuration
# -----------------
# To run on a CPU node (like Puhti's CPU nodes), use the following:
# ENABLE_GPU=false
# GPU_BACKEND=cpu
# LLM_GPU_LAYERS=0
#
# To run on a GPU node:
# For NVIDIA GPUs, set ENABLE_GPU=true and GPU_BACKEND=cuda
# For Apple Silicon, set ENABLE_GPU=true and GPU_BACKEND=metal

ENABLE_GPU=true
# Options: auto, metal, cuda, cpu
GPU_BACKEND=auto
# Set to a positive number; -1 uses all layers. MUST be 0 for CPU-only.
LLM_GPU_LAYERS=-1
# Fraction of available GPU memory to use 
GPU_MEMORY_FRACTION=0.8

# File Processing
MAX_FILE_SIZE_MB=50
PROCESSING_TIMEOUT=300
CHUNK_SIZE=2000

# API Settings
API_HOST=127.0.0.1

# LLM Defaults
LLM_MODEL_PATH=models/llm/mistral-7b-instruct-v0.2.Q4_K_M.gguf
LLM_N_CTX=8192
LLM_TEMPERATURE=0.1
LLM_MAX_TOKENS=1536
LLM_RANDOM_SEED=42
PROMPTING_STRATEGY=P3

# Quality & Performance
CONFIDENCE_THRESHOLD=0.8
QUALITY_THRESHOLD=0.7
MAX_WORKERS=8
